                EXECUTER le code des OS
		=======================

Version 3.0 : 01/06/2010


1-Prerequis
-----------		
Le code des OS doit etre installe (voir INSTALL.txt)


2-Fichiers necessaires pour lancer le code des OS
---------------------------------------------------
Dans le repertoire exe de l'arborescence SOS, on trouve 
    1 procedures de lancement (KSH) :
           lanceOS.ksh   
    1 script KSH qui gere l'enchainement des traitements
           main_SOS.ksh	       	  
    4 executables (resultat de l'installation)
           SOS.exe           
	   SOS_AEROSOLS.exe 
	   SOS_ANGLES.exe  
	   SOS_PROFIL.exe    
	   SOS_SURFACE.exe    
	   

3-Description des fichiers KSH
------------------------------	   
Le fichier lanceOS.ksh permet de definir les parametres de traitement.
Il passe les arguments au script de traitement main_SOS.ksh.

Le fichier main_SOS.ksh permet d'enchainer l'execution de
	  SOS_ANGLES.exe 	calcul des fichiers d'angles
	  SOS_SURFACE.exe 	calcul du fichier de BRDF / BPDF
          SOS_AEROSOLS.exe  	calcul du fichier Aerosols
	  SOS_PROFIL.exe 	calcul du fichier Profil
	  SOS.exe      		calcul des OS
en positionnant les arguments necessaires a chaque programme.

Il gere l'utilisation d'une longueur d'onde de reference pour le calcul
des proprietes radiatives des aerosols.

Le calcul des fichiers de MIE et des fichiers de BRDF/BPDF n'est realise que 
si le fichier resultat n'existe pas deja (controle sur le nom du fichier 
resultat ).
Le nom du fichier resultat peut etre fixe ou deduit en fonction des autres
arguments du programme.


Pour l'utilisateur, le seul fichier a manipuler/modifier est lanceOS.ksh.


4-Mise a jour du fichier lanceOS.ksh
-------------------------------------
Le fichier lanceOS.ksh permet de positionner les arguments de chaque executable.

Les valeurs positionnees actuellement servent d'exemple.

Tous les arguments et leur format sont decrits dans les cartouches 
du fichier lanceOS.ksh.

L'utilisateur doit editer le fichier lanceOS.ksh. 
Il doit definir 2 variables d'environnement utilisees ensuite dans le fichier:
      SOS_RACINE    Chemin d'acces a l'arborescence SOS.
                    ls $SOS_RACINE/exe (liste des executables et des ksh).
		    variable utilisee pour acceder aux executables et 
		    aux procedures KSH.
      SOS_RESULT    Repertoire de stockage des fichiers resultats
                    (repertoire specifique de l'utilisateur)
		    Ne pas oublier de creer ce repertoire (par mkdir) 
		    s'il n'existe pas
		    
Dans l'exemple actuel, les fichiers resultats de chaque executable sont
stockes respectivement dans  
     $SOS_RESULT/MIE   			 fichier de MIE
     
     $SOS_RESULT/SURFACE/BREON		 fichier BPDF de Breon
     $SOS_RESULT/SURFACE/GLITTER	 fichier BRDF/BPDF du glitter
     $SOS_RESULT/SURFACE/NADAL		 fichier BPDF de Nadal
     $SOS_RESULT/SURFACE/RH		 fichier BPDF de Rondeaux-Herman
     $SOS_RESULT/SURFACE/ROUJEAN	 fichier BRDF de Roujean
     
     $SOS_RESULT/SOS    fichier resultat des OS
     
     $SOS_RESULT/LOG    fichier trace
     
Si l'utilisateur veut conserver cette organisation, il doit creer 
les sous-repertoires.

5-Lancement du code des OS
--------------------------
lanceOS.ksh

Toute erreur lors de l'execution d'un programme est signalee par un message 
a l'ecran et interrompt les calculs.







